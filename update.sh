#!/bin/bash

echo "=== Обновление Avatar Customizer ==="

# Переходим в директорию скрипта (она же корень проекта)
cd "$(dirname "$0")"

# 1. Получаем свежий код
echo "[1/3] Получение изменений из Git..."
git pull origin main

# 2. Обновляем зависимости (на случай если добавились новые)
echo "[2/3] Обновление библиотек..."
npm install

# 3. Перезапускаем сервер
echo "[3/3] Перезапуск сервера..."
pm2 restart avatar-app

echo "=== Обновление завершено! ==="
pm2 status
